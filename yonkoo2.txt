-- Fixed: Your REAL Steam image + tiny top-right draggable toggle

local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "CoolShop"
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

-- Main window (hidden at start)
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0,500,0,350)
mainFrame.Position = UDim2.new(0.5,-250,0.5,-175)
mainFrame.BackgroundColor3 = Color3.fromRGB(20,20,20)
mainFrame.Visible = false
mainFrame.ClipsDescendants = true
mainFrame.Parent = screenGui
Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0,14)

-- Titlebar + close button
local titleBar = Instance.new("Frame")
titleBar.Size = UDim2.new(1,0,0,40)
titleBar.BackgroundColor3 = Color3.fromRGB(15,15,15)
titleBar.Parent = mainFrame
Instance.new("UICorner", titleBar).CornerRadius = UDim.new(0,14)

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1,-100,1,0)
title.Position = UDim2.new(0,15,0,0)
title.BackgroundTransparency = 1
title.Text = "Cool Shop"
title.TextColor3 = Color3.new(1,1,1)
title.TextScaled = true
title.Font = Enum.Font.GothamBold
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = titleBar

local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0,40,0,40)
closeBtn.Position = UDim2.new(1,-40,0,0)
closeBtn.BackgroundColor3 = Color3.fromRGB(220,30,30)
closeBtn.Text = "X"
closeBtn.TextColor3 = Color3.new(1,1,1)
closeBtn.TextScaled = true
closeBtn.Parent = titleBar
Instance.new("UICorner", closeBtn).CornerRadius = UDim.new(0,14)

-- TINY TOP-RIGHT TOGGLE WITH YOUR EXACT STEAM IMAGE
local toggle = Instance.new("ImageButton")
toggle.Size = UDim2.new(0,52,0,52)                         -- perfect small size
toggle.Position = UDim2.new(1,-67,0,15)                    -- classic top-right spot
toggle.BackgroundTransparency = 1
toggle.Image = "https://images.steamusercontent.com/ugc/2008096370820324587/2E1CD0D89E1415A4FEE33581971A40F3A27F3101/"  -- YOUR Law image
toggle.Parent = screenGui

Instance.new("UICorner", toggle).CornerRadius = UDim.new(1,0)  -- circle

-- Soft shadow
local shadow = Instance.new("ImageLabel")
shadow.Size = UDim2.new(1.4,0,1.4,0)
shadow.Position = UDim2.new(-0.2,0,-0.2,0)
shadow.BackgroundTransparency = 1
shadow.Image = "rbxassetid://5554236805"
shadow.ImageColor3 = Color3.new(0,0,0)
shadow.ImageTransparency = 0.65
shadow.ZIndex = -1
shadow.Parent = toggle

-- DRAGGABLE TOGGLE (100% working)
local dragging = false
local dragInput, dragStart, startPos

toggle.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = toggle.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

toggle.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragging and input == dragInput then
        local delta = input.Position - dragStart
        toggle.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X,
                                   startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

-- Toggle open/close
local open = false
local function ToggleUI()
    open = not open
    if open then
        mainFrame.Visible = true
        TweenService:Create(mainFrame, TweenInfo.new(0.4, Enum.EasingStyle.Quint), 
            {Position = UDim2.new(0.5,-250,0.5,-175)}):Play()
    else
        TweenService:Create(mainFrame, TweenInfo.new(0.35), 
            {Position = UDim2.new(0.5,-250,1.2,0)}):Play()
        task.wait(0.4)
        mainFrame.Visible = false
    end
end

toggle.MouseButton1Click:Connect(ToggleUI)
closeBtn.MouseButton1Click:Connect(ToggleUI)

-- Insert key
UserInputService.InputBegan:Connect(function(k)
    if k.KeyCode == Enum.KeyCode.Insert then ToggleUI() end
end)

print("Loaded with YOUR Steam Law image — top-right 52×52 draggable toggle")
